---
- name: Default Route
  cisco.ios.ios_config:
    lines:
      - ip route 0.0.0.0 0.0.0.0 {{ip_isp}}
  when: inventory_hostname | regex_search('^R.*$')

- name: OSPF Config for Routers
  cisco.ios.ios_config:
    lines:
      - network {{ospf.network}} {{ospf.wildcard_mask}} area {{ospf.area}}
      - passive-interface vlan{{vlan_id}}
    parents:
      - router ospf {{ospf.process}}
  when: inventory_hostname | regex_search('^R.*$')

- name: OSPF Config CoreSwitches
  cisco.ios.ios_config:
    lines:
      - network {{ospf.network}} {{ospf.wildcard_mask}} area {{ospf.area}}
      - passive-interface {{default_route}}
      - default-information originate metric-type {{ospf.metric_type}}
    parents:
      - router ospf {{ospf.process}}
  when: inventory_hostname | regex_search('^Core.*$')

